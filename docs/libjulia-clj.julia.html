<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>libjulia-clj.julia documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version">1.000-beta-8</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="gc.html"><div class="inner"><span>JVM/Julia Garbage Collection Integration</span></div></a></li><li class="depth-1 "><a href="signals.html"><div class="inner"><span>Julia, The JVM, and Signals</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>libjulia-clj</span></div></div></li><li class="depth-2 branch"><a href="libjulia-clj.java-api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java-api</span></div></a></li><li class="depth-2 current"><a href="libjulia-clj.julia.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>julia</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="libjulia-clj.julia.html#var--.3Earray"><div class="inner"><span>-&gt;array</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-apply-tuple-type"><div class="inner"><span>apply-tuple-type</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-apply-type"><div class="inner"><span>apply-type</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-base-ary-type*"><div class="inner"><span>base-ary-type*</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-call-function"><div class="inner"><span>call-function</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-call-function-kw"><div class="inner"><span>call-function-kw</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-cycle-gc.21"><div class="inner"><span>cycle-gc!</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-initialize.21"><div class="inner"><span>initialize!</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-jl"><div class="inner"><span>jl</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-jl-undef*"><div class="inner"><span>jl-undef*</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-named-tuple"><div class="inner"><span>named-tuple</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-new-array"><div class="inner"><span>new-array</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-set-julia-gc-root-log-level.21"><div class="inner"><span>set-julia-gc-root-log-level!</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-struct"><div class="inner"><span>struct</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-tuple"><div class="inner"><span>tuple</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-typeof"><div class="inner"><span>typeof</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-with-stack-context"><div class="inner"><span>with-stack-context</span></div></a></li><li class="depth-1"><a href="libjulia-clj.julia.html#var-zeros*"><div class="inner"><span>zeros*</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">libjulia-clj.julia</h1><div class="doc"><div class="markdown"><p>Public API for Julia functionality.  Initialize! must be called before any other functions
and there are a choice of garbgage collection mechanisms (see topic in docs).
is probably a bad idea to call Julia from multiple threads so access to julia
should be from one thread or protected via a mutex.</p>
<p>Example:</p>
<pre><code class="language-clojure">user&gt; (require '[libjulia-clj.julia :as julia])
nil
user&gt; (julia/initialize!)
:ok
user&gt; (def ones-fn (julia/jl "Base.ones"))
Nov 27, 2020 12:39:39 PM clojure.tools.logging$eval6611$fn__6614 invoke
INFO: Rooting address  0x00007F3E092D6E40
#'user/ones-fn
user&gt; (def jl-ary (ones-fn 3 4))

Nov 27, 2020 12:40:02 PM clojure.tools.logging$eval6611$fn__6614 invoke
INFO: Rooting address  0x00007F3DFF9C92A0
#'user/jl-ary
user&gt; jl-ary
[1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0]
user&gt; (type jl-ary)
libjulia_clj.impl.base.JuliaArray
user&gt; (require '[tech.v3.tensor :as dtt])
nil
user&gt; ;;zero-copy
user&gt; (def tens (dtt/as-tensor jl-ary))
#'user/tens
user&gt; tens
#tech.v3.tensor&lt;float64&gt;[3 4]
[[1.000 1.000 1.000 1.000]
 [1.000 1.000 1.000 1.000]
 [1.000 1.000 1.000 1.000]]
user&gt; (dtt/mset! tens 0 25)
#tech.v3.tensor&lt;float64&gt;[3 4]
[[25.00 25.00 25.00 25.00]
 [1.000 1.000 1.000 1.000]
 [1.000 1.000 1.000 1.000]]
user&gt; jl-ary
[25.0 25.0 25.0 25.0; 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0]
</code></pre>
</div></div><div class="public anchor" id="var--.3Earray"><h3>-&gt;array</h3><div class="usage"><code>(-&gt;array tens)</code></div><div class="doc"><div class="markdown"><p>Create a new dense julia array that is the 'transpose' of the input tensor.
Transposing ensures the memory alignment matches as Julia is column-major
while datatype is row-major.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L170">view source</a></div></div><div class="public anchor" id="var-apply-tuple-type"><h3>apply-tuple-type</h3><div class="usage"><code>(apply-tuple-type &amp; args)</code></div><div class="doc"><div class="markdown"><p>Create a new Julia tuple type from a sequence of types.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L89">view source</a></div></div><div class="public anchor" id="var-apply-type"><h3>apply-type</h3><div class="usage"><code>(apply-type jl-type &amp; args)</code></div><div class="doc"><div class="markdown"><p>Create a new Julia type from an existing type and a sequence of other
types.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L95">view source</a></div></div><div class="public anchor" id="var-base-ary-type*"><h3>base-ary-type*</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Resolves to the base julia array datatype</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L149">view source</a></div></div><div class="public anchor" id="var-call-function"><h3>call-function</h3><div class="usage"><code>(call-function fn-handle args options)</code><code>(call-function fn-handle args)</code></div><div class="doc"><div class="markdown"><p>Call a function.  The result will be marshalled back to the jvm and if necessary,
rooted.  This method is normally not necessary but useful if you would like to
use keywords in your argument list or specify to avoid rooting the result.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/impl/base.clj#L477">view source</a></div></div><div class="public anchor" id="var-call-function-kw"><h3>call-function-kw</h3><div class="usage"><code>(call-function-kw fn-handle args kw-args options)</code><code>(call-function-kw fn-handle args kw-args)</code><code>(call-function-kw fn-handle args)</code></div><div class="doc"><div class="markdown"><p>Call a julia function and pass in keyword arguments.  This is useful if you
would like to specify the arglist and kw-argmap.  Normally this is done for
you.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/impl/base.clj#L588">view source</a></div></div><div class="public anchor" id="var-cycle-gc.21"><h3>cycle-gc!</h3><div class="usage"><code>(cycle-gc!)</code></div><div class="doc"><div class="markdown"><p>Call periodically to release rooted Julia objects.  We root return values if they
aren't primitives and then hook them to the jvm GC such that they get put in a queue
once they aren't reachable by the program.  This call clears that queue and unroots
them thus notifying the Julia GC that they aren't reachable any more.</p>
<p>In the future point this may be done for you.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L110">view source</a></div></div><div class="public anchor" id="var-initialize.21"><h3>initialize!</h3><div class="usage"><code>(initialize! {:keys [julia-library-path], :as options})</code><code>(initialize!)</code></div><div class="doc"><div class="markdown"><p>Initialize julia optionally providing an explicit path which will override
the julia library search mechanism.</p>
<p>Currently the search mechanism is:</p>
<p><a href="user-path">user-path</a>-&gt;JULIA_HOME-&gt;"julia"</p>
<p>Returns :ok on success else exception.</p>
<p>Options:</p>
<ul>
<li><code>:julia-home</code> - Explicitly declare the env var julia-home.</li>
<li><code>:n-threads</code> - Set to -1 to set to n-cpus.  Defaults to nil which means single threaded
unless the JULIA_NUM_THREADS environment variable is set.  Note that this has implications
for application stability - see the signals.md topic.</li>
<li><code>:signals-enabled?</code> - Users do not usually need to set this.  This allows users to disable
all of Julia's signal handling most likely leading to a crash.  See the signals.md topic.</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/impl/base.clj#L163">view source</a></div></div><div class="public anchor" id="var-jl"><h3>jl</h3><div class="usage"><code>(jl str-data options)</code><code>(jl str-data)</code></div><div class="doc"><div class="markdown"><p>Eval a string in julia returning the result.  If the result is callable in Julia,
the result will be callable in Clojure.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L69">view source</a></div></div><div class="public anchor" id="var-jl-undef*"><h3>jl-undef*</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Resolves to the julia undef type</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L152">view source</a></div></div><div class="public anchor" id="var-named-tuple"><h3>named-tuple</h3><div class="usage"><code>(named-tuple value-map)</code><code>(named-tuple)</code></div><div class="doc"><div class="markdown"><p>Create a julia named tuple from a map of values.  The keys of the map must be
keywords or symbols.  A new named tuple type will be created and instantiated.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/impl/base.clj#L561">view source</a></div></div><div class="public anchor" id="var-new-array"><h3>new-array</h3><div class="usage"><code>(new-array shape datatype)</code><code>(new-array shape)</code></div><div class="doc"><div class="markdown"><p>Create a new, uninitialized dense julia array.  Because Julia is column major
while tech.v3.datatype is row major, the returned array's size will be the
reverse of dtype/shape as that keeps the same in memory alignment of data.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L159">view source</a></div></div><div class="public anchor" id="var-set-julia-gc-root-log-level.21"><h3>set-julia-gc-root-log-level!</h3><div class="usage"><code>(set-julia-gc-root-log-level! log-level)</code></div><div class="doc"><div class="markdown"><p>Set the log level to use when rooting/unrooting julia objects.  We automatically
root julia objects in a julia id dictionary that we expose to JVM objects.
This code isn't yet perfect, so sometimes it is worthwhile to log all
root/unroot operations.</p>
<p>Valid log levels are valid log levels for
<a href="http://clojure.github.io/tools.logging/"><code>clojure/tools.logging</code></a>.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L137">view source</a></div></div><div class="public anchor" id="var-struct"><h3>struct</h3><div class="usage"><code>(struct struct-type &amp; args)</code></div><div class="doc"><div class="markdown"><p>Instantiate a Julia struct type (tuple, NamedTuple, etc).  Use this after
apply-tuple-type in order to create an instance of your new type.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L100">view source</a></div></div><div class="public anchor" id="var-tuple"><h3>tuple</h3><div class="usage"><code>(tuple &amp; args)</code></div><div class="doc"><div class="markdown"><p>Create a julia tuple from a set of arguments.  The tuple type will be the
same datatype as the argument types.</p>
<p>This function converts the arguments to julia, calls <code>apply-tuple-type</code>
on the resulting argument types, and then instantiates an instance of
the given newly created tuple type.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L105">view source</a></div></div><div class="public anchor" id="var-typeof"><h3>typeof</h3><div class="usage"><code>(typeof item)</code></div><div class="doc"><div class="markdown"><p>Get the julia type of an item.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L80">view source</a></div></div><div class="public anchor" id="var-with-stack-context"><h3>with-stack-context</h3><h4 class="type">macro</h4><div class="usage"><code>(with-stack-context &amp; body)</code></div><div class="doc"><div class="markdown"><p>Run code in which all objects created within this context will be released once
the stack unwinds where released means unrooted and thus potentially available to
the next julia garbage collection run.</p>
</div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L121">view source</a></div></div><div class="public anchor" id="var-zeros*"><h3>zeros*</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/cnuernber/libjulia-clj/blob/master/src/libjulia_clj/julia.clj#L156">view source</a></div></div></div></body></html>